<div class="flex h-full flex-row gap-2">
  <app-panel label="L1">
    <app-letter-selector
      #letter1Ref
      field="letter1"
      [value]="letter1()"
      (valueChanged)="updateLetter1($event)"
      [autoSelectOnAdvance]="true"
      [next]="focusLetter2"
    />
  </app-panel>

  <app-panel label="L2">
    <app-letter-selector
      #letter2Ref
      field="letter2"
      [value]="letter2()"
      (valueChanged)="updateLetter2($event)"
      [previous]="focusLetter1FromLetter2"
      [next]="focusAlbumList"
      [includeSpace]="true"
    />
  </app-panel>

  <app-panel
    class="flex-1"
    [label]="showArtistList() ? 'Artists' : 'Albums'"
    [actions]="getPanelActions()"
    meta=""
    [stableGutter]="false"
  >
    @if (showArtistList()) {
      <app-artists-list
        class="flex-1"
        [letters]="selectedLetters()"
        [selectedArtistId]="selectedAlbumId()"
        [previous]="focusLetter2FromAlbums"
        [next]="focusTracksList"
        [onArtistSelected]="handleArtistSelected"
      />
    }
    @if (showAlbumList()) {
      <app-albums-list
        class="flex-1"
        [letters]="selectedLetters()"
        [selectedAlbumId]="selectedAlbumId()"
        [previous]="focusLetter2FromAlbums"
        [next]="focusTracksList"
        [onAlbumSelected]="handleAlbumSelected"
      />
    }
  </app-panel>
  <div class="flex-1">
    @if (showArtistList()) {
      <app-artist-detail
        [selectedArtistId]="selectedArtistId()"
        [previous]="focusAlbumListFromTracks"
      />
    }
    @if (showAlbumList()) {
      <app-album-detail
        [selectedAlbumId]="selectedAlbumId()"
        [previous]="focusAlbumListFromTracks"
      />
    }
  </div>
</div>
