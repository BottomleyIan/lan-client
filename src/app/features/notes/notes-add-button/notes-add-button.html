<app-icon-button-primary
  icon="notesAdd"
  label="Add journal entry"
  buttonClass="text-slate-100/80 hover:text-slate-100 tokyo-glow-cyan-hover"
  (pressed)="openDialog()"
/>

<app-dialog #dialog [labelledById]="'journal-dialog-title'" [describedById]="'journal-dialog-body'">
  <form [formGroup]="form" (ngSubmit)="submit()">
    <h2 class="text-lg font-semibold text-slate-100" id="journal-dialog-title">New journal</h2>
    <p class="text-sm text-slate-400" id="journal-dialog-body">Log a journal entry for today.</p>

    <div class="mt-4 flex flex-col gap-2">
      <label class="text-sm font-semibold text-slate-100" for="journal-body">Body</label>
      <textarea
        uiInput
        id="journal-body"
        rows="4"
        placeholder="Write your note..."
        formControlName="body"
        [attr.aria-invalid]="body.invalid && body.touched ? true : null"
      ></textarea>
      @if (body.invalid && body.touched) {
        <p class="text-xs font-semibold text-rose-200">Body is required.</p>
      }
    </div>

    <div class="mt-4 flex flex-col gap-2">
      <label class="text-sm font-semibold text-slate-100" for="journal-description"
        >Description</label
      >
      <input
        uiInput
        id="journal-description"
        type="text"
        placeholder="Optional summary"
        formControlName="description"
      />
    </div>

    <div class="mt-4 flex flex-col gap-2">
      <label class="text-sm font-semibold text-slate-100" for="journal-tags">Tags</label>
      <input
        uiInput
        id="journal-tags"
        type="text"
        placeholder="daily, release, ideas"
        formControlName="tags"
      />
      <p class="text-xs text-slate-400">Separate tags with commas.</p>
    </div>

    <div class="mt-6 flex justify-end gap-2">
      <app-icon-button-danger
        icon="x"
        label="Cancel"
        [disabled]="isSaving()"
        (pressed)="closeDialog()"
      />
      <app-icon-button-primary
        icon="check"
        label="Save journal"
        [disabled]="form.invalid || isSaving()"
        type="submit"
      />
    </div>
  </form>
</app-dialog>
