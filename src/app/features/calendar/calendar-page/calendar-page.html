<div class="flex h-full flex-col gap-4">
  <div class="flex items-center justify-between">
    <div>
      <div class="text-xs tracking-[0.14em] text-slate-400 uppercase">Calendar</div>
      <div class="text-2xl font-semibold text-white">{{ monthLabel() }} {{ year() }}</div>
    </div>
    <div class="flex items-center gap-3">
      <a
        [routerLink]="['/calendar', prevLink().year, prevLink().month]"
        class="rounded-lg border border-white/15 px-3 py-2 text-sm font-semibold text-slate-200 transition hover:border-white/35 hover:bg-white/10 focus-visible:ring-2 focus-visible:ring-cyan-400/70 focus-visible:outline-none"
      >
        ← Previous
      </a>
      <a
        [routerLink]="['/calendar', nextLink().year, nextLink().month]"
        class="rounded-lg border border-white/15 px-3 py-2 text-sm font-semibold text-slate-200 transition hover:border-white/35 hover:bg-white/10 focus-visible:ring-2 focus-visible:ring-cyan-400/70 focus-visible:outline-none"
      >
        Next →
      </a>
    </div>
  </div>

  <div class="grid h-full flex-1 grid-rows-[auto_1fr] gap-2">
    <div
      class="grid grid-cols-7 gap-2 text-center text-xs tracking-[0.18em] text-slate-400 uppercase"
    >
      @for (day of dayNames; track day) {
        <div class="rounded-lg border border-white/10 bg-white/5 px-2 py-1">{{ day }}</div>
      }
    </div>

    <div class="grid flex-1 grid-cols-7 gap-2">
      @for (day of days(); track $index) {
        @if (day) {
          <a
            class="group min-h-[96px] rounded-xl border border-white/10 bg-gradient-to-b from-white/5 to-white/0 p-3 text-sm text-slate-100 transition hover:border-white/30 hover:bg-white/5 focus-visible:ring-2 focus-visible:ring-cyan-400/70 focus-visible:outline-none"
            [routerLink]="['/calendar', year(), month(), day]"
          >
            <div class="text-right text-xs font-semibold text-slate-300">{{ day }}</div>
            @if (tasksForDay(day).length > 0) {
              <div class="mt-2 flex flex-wrap gap-2">
                @for (task of tasksForDay(day); track task.id) {
                  <app-calendar-task [task]="task" [showLabel]="tasksForDay(day).length === 1" />
                }
              </div>
            }
          </a>
        } @else {
          <div
            class="min-h-[96px] rounded-xl border border-white/5 bg-gradient-to-b from-white/5 to-white/0 p-3 text-sm text-slate-500"
          >
            <div class="text-right text-xs text-slate-600">–</div>
          </div>
        }
      }
    </div>
  </div>
</div>
