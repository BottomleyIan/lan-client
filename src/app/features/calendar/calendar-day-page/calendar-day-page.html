<div class="flex h-full flex-col gap-4">
  <div class="flex flex-col gap-3 md:flex-row md:items-center md:justify-between">
    <div>
      <div class="text-xs tracking-[0.14em] text-slate-400 uppercase">Calendar</div>
      <div class="text-2xl font-semibold text-white">{{ title() }}</div>
    </div>
    <div class="flex flex-wrap items-center gap-2">
      @if (prevLink()) {
        <a
          [routerLink]="['/calendar', prevLink()?.year, prevLink()?.month, prevLink()?.day]"
          class="rounded-lg border border-white/15 px-3 py-2 text-sm font-semibold text-slate-200 transition hover:border-white/35 hover:bg-white/10 focus-visible:ring-2 focus-visible:ring-cyan-400/70 focus-visible:outline-none"
          aria-label="Previous day"
        >
          Previous
        </a>
      }
      @if (nextLink()) {
        <a
          [routerLink]="['/calendar', nextLink()?.year, nextLink()?.month, nextLink()?.day]"
          class="rounded-lg border border-white/15 px-3 py-2 text-sm font-semibold text-slate-200 transition hover:border-white/35 hover:bg-white/10 focus-visible:ring-2 focus-visible:ring-cyan-400/70 focus-visible:outline-none"
          aria-label="Next day"
        >
          Next
        </a>
      }
      @if (year() && month()) {
        <a
          [routerLink]="['/calendar', year(), month()]"
          class="rounded-lg border border-white/15 px-3 py-2 text-sm font-semibold text-slate-200 transition hover:border-white/35 hover:bg-white/10 focus-visible:ring-2 focus-visible:ring-cyan-400/70 focus-visible:outline-none"
        >
          Back to month
        </a>
      }
    </div>
  </div>

  <app-panel class="flex-1" [label]="title()" [stableGutter]="false">
    <div class="flex flex-col gap-3 p-4">
      @if (data$ | async; as data) {
        <pre>{{ data.tasks }}</pre>
        @if (data.tasks?.length === 0) {
          <p class="text-sm text-slate-400">No tasks for this day.</p>
        } @else {
          <div class="flex flex-col gap-3">
            @for (task of data.tasks; track task.id) {
              <div class="rounded-xl border border-white/10 bg-white/5 p-3">
                <app-calendar-task [task]="task" />
              </div>
            }
          </div>
        }
        @if (data.notes?.length === 0) {
          <p class="text-sm text-slate-400">No notes for this day.</p>
        } @else {
          <div class="flex flex-col gap-3">
            @for (task of data.notes; track task.id) {
              <div class="rounded-xl border border-white/10 bg-white/5 p-3">
                <app-calendar-task [task]="task" />
              </div>
            }
          </div>
        }
      }
    </div>
  </app-panel>
</div>
