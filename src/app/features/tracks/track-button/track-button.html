<button uiBigButton class="flex w-full flex-row overflow-hidden text-left" (click)="openDialog()">
  <div class="flex w-full gap-3 p-3">
    <div>
      <h2 uiH2 class="line-clamp-1 leading-tight font-medium">{{ track().title }}</h2>
      <div class="flex flex-row gap-4">
        <div class="line-clamp-1 text-sm text-gray-400">{{ track().artist }}</div>

        @if (formattedDuration()) {
          <div class="mt-1 text-xs text-gray-500">
            {{ formattedDuration() }}
          </div>
        }
        @if (track().year) {
          <div class="mt-1 text-xs text-gray-500">
            {{ track().year }}
          </div>
        }
      </div>
    </div>
    <div class="flex grow flex-row justify-end">
      @for (level of [1, 2, 3, 4, 5]; track $index) {
        <app-icon
          [name]="track().rating >= level ? 'star' : 'starOutline'"
          [class.text-tokyo-text-subtle]="track().rating < level"
          [class.text-tokyo-text-muted]="track().rating >= level"
          [class.tokyo-glow-cyan]="track().rating >= level"
        />
      }
    </div>
  </div>
</button>

<app-dialog #dialog [labelledById]="dialogTitleId()" [describedById]="dialogDescriptionId()">
  <div class="p-6">
    <div class="flex items-start justify-between gap-4">
      <div>
        <h2 class="text-lg font-semibold" [id]="dialogTitleId()">{{ track().title }}</h2>
        <p class="mt-1 text-sm text-slate-400" [id]="dialogDescriptionId()">
          Choose how you want to use this track.
        </p>
      </div>
      <app-icon-button-danger icon="x" label="Close dialog" (pressed)="closeDialog()" />
    </div>

    <div class="mt-6 flex flex-wrap justify-end gap-2">
      <app-icon-button-primary
        icon="play"
        label="Play track"
        text="Play"
        [disabled]="isWorking()"
        (pressed)="playTrack()"
      />
      <app-icon-button-primary
        icon="playlist"
        label="Add track to end of playlist"
        text="Add to playlist"
        [disabled]="isWorking()"
        (pressed)="addToPlaylist()"
      />
    </div>
  </div>
</app-dialog>
