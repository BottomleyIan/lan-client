<app-icon-button-primary
  icon="imageAdd"
  [label]="'Update image for ' + trackTitle()"
  (pressed)="openDialog()"
/>

<dialog #dialogEl uiDialog aria-labelledby="dialog-title">
  <div
    class="fixed inset-0 bg-gray-900/50 transition-opacity data-closed:opacity-0 data-enter:duration-300 data-enter:ease-out data-leave:duration-200 data-leave:ease-in"
  ></div>
  <div
    tabindex="0"
    class="flex min-h-full items-end justify-center p-4 text-center focus:outline-none sm:items-center sm:p-0"
  >
    <div
      class="relative transform overflow-hidden rounded-lg bg-gray-800 text-left shadow-xl outline -outline-offset-1 outline-white/10 transition-all data-closed:translate-y-4 data-closed:opacity-0 data-enter:duration-300 data-enter:ease-out data-leave:duration-200 data-leave:ease-in sm:my-8 sm:w-full sm:max-w-lg data-closed:sm:translate-y-0 data-closed:sm:scale-95"
    >
      <form [formGroup]="form" (ngSubmit)="accept()">
        <h2 class="text-lg font-semibold" id="dialog-title">Update track image</h2>
        <p class="text-sm text-slate-400">
          {{ trackTitle() }}
        </p>

        <div class="mt-4 flex flex-col gap-2">
          <label class="text-sm font-semibold text-slate-100" for="track-image-url">
            Image URL
          </label>

          <input
            uiInput
            id="track-image-url"
            type="url"
            placeholder="https://example.com/image.jpg"
            formControlName="url"
            [attr.aria-invalid]="url.invalid && url.touched ? true : null"
          />

          @if (url.invalid && url.touched) {
            <p class="text-xs font-semibold text-rose-200">Image URL is required.</p>
          }
        </div>

        <div class="mt-6 flex justify-end gap-2">
          <app-icon-button-danger
            icon="x"
            label="Cancel"
            [disabled]="isSaving()"
            (pressed)="closeDialog()"
          />

          <app-icon-button-primary
            icon="check"
            label="Save"
            [disabled]="form.invalid || isSaving()"
            type="submit"
          />
        </div>
      </form>
    </div>
  </div>
</dialog>
